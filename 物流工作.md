###IT合作社 食品安全项目

##CSA物流 
需求整理稿

###合作模式
1. 模式列表

	<table>
		<tr><th width=20%></th><th>一</th><th>二</th><th>三</th><th>四</th><th>五</th></tr>
		<tr><td>简称</td><td>基本</td><td>万家康</td><td>物流合作1</td><td>物流合作2</td><td>CRM</td></tr>
		<tr><td>备注</td><td></td><td>生产者通过承运方送货给自己发展的会员。</td><td>承运方给项目外用户送货</td><td>项目内消费者委托承运方取货</td><td>生产者管理自有会员</td></tr>
		<tr><td>生产者使用系统（基本/物流）</td><td>是/是</td><td>是/是</td><td>否/否</td><td>否/否</td><td>是/否</td></tr>
		<tr><td>消费者使用系统（基本/物流）</td><td>是/是</td><td>否/否</td><td>否/否</td><td>否/是</td><td>否/否</td></tr>
		<tr><td>承运方使用系统</td><td>是</td><td>是</td><td>是</td><td>是</td><td>否</td></tr>
		<tr><td>消费者选择物流</td><td>是</td><td>否</td><td>否</td><td>是</td><td>否</td></tr>
		<tr><td>菜款提成（IT-消费-生产）</td><td>2-4-6</td><td>2-0-0</td><td>0</td><td>0</td><td>2-0-0</td></tr>
		<tr><td>运费提成（IT-消费-生产）</td><td>4-0-8</td><td>4-0-8</td><td>4-0-0</td><td>4-0-0</td><td>0</td></tr>
		<tr><td colspan=6 align=center> 支持的配送类型(DeliveryType) </td></tr>

		<tr><td>[1]农场自提</td><td>是</td><td></td><td></td><td></td><td></td></tr>
		<tr><td>[2]集散点自提</td><td>是</td><td></td><td></td><td></td><td></td></tr>
		<tr><td>[3]取菜点自提</td><td>是</td><td></td><td></td><td></td><td></td></tr>
		<tr><td>[4]其它自提（比如中铁快运仓库自提）</td><td></td><td></td><td></td><td></td><td></td></tr>
		<tr><td>[11]集散点宅配</td><td></td><td></td><td></td><td></td><td></td></tr>
		<tr><td>[12]取菜点宅配</td><td>是</td><td></td><td></td><td></td><td></td></tr>
		<tr><td>[13]农场宅配 </td><td>是</td><td></td><td></td><td></td><td></td></tr>
		<tr><td></td><td></td><td></td><td></td><td></td><td></td></tr>
		<tr><td></td><td></td><td></td><td></td><td></td><td></td></tr>
		<tr><td></td><td></td><td></td><td></td><td></td><td></td></tr>
	</table>

2. 配送类型

###模块划分
1. DSS管理模块
	1. 
	2. 接口：
		1. 登记承运方：
			1. 
			2. 参数：
				- 类型[1-农场自有，2-集散点自有，3-取菜点自有，4-外部承运方，5-内部承运方]
				- 相关编号[农场编号、集散点编号、取菜点编号、用户编号]
				- 名称
				- OGID：所属运营区域编号
			3.  
		2. 登记取菜点：
			1. 参数：
				- 拥有者用户编号
				- 取菜点名称
				- 描述
				- 地址编号
					- 经纬度
					- 地址名称
					- 详细地址
					- 简略地址
					- 行政区域编号
					- 邮编
					- 座机
					- 手机
					- 联系人
					- 备注
				- 常温首日保管费
				- 常温续日保管费
				- 冷藏首日保管费
				- 冷藏续日保管费
				- 冷冻首日保管费
				- 冷冻续日保管费
				- 开门时间
				- 关门时间
				- 是否对所有农场开放
				- 是否冷藏
				- 是否冷冻
			2. 
		3. 登记集散点： 【TBD】
		4. DSS登记：
			1. 参数：
				- 装货点[类型+编号]
				- 卸货点[类型+编号]
				- 承运方
				- 是否冷藏
				- 是否冷冻
				- 是否随时承运
					- 星期几
				- 装货时间
				- 卸货时间
				- 首重公斤数
				- 首重运费
				- 续重公斤运费
				- 每件包裹运费（？）
				- 最大载重
				- 最大包裹数
				- 最低消费金额
				- 工单通知模式[固定、调度]
				- 工单通知类型[短信、email、站内消息、打印机、PDA]
				- 工单通知参数[手机号、email地址、打印机编号、IMEI号]
			2. 返回：
				- DSS编号 or -1(失败) 
		5. 登记地址：
			1. 参数：
			 		- 种类[1-farm，2-dp，3-tp，4-消费者住址]
			 		- 相关编号
					- 经纬度
					- 地址名称
					- 详细地址
					- 简略地址
					- 行政区域编号
					- 邮编
					- 座机
					- 手机
					- 联系人
					- 备注
			2. 返回： 
				- AddressID or -1（失败）
		6. 工单查询：直接读数据库
		6. 查询账务：（或者由统一财务模块提供？）
			1. 参数：
				- 查询对象[类型+编号]
				- 查询月份 
			2. 返回 
				- 数据集[] 
		7. 对账：（或者由统一财务模块提供？）
			1. 
2. DS管理模块
	1. 
	2. 接口：
		1. 登记DS组织者：
			1. 参数：
				- UID
				- ARID
				- 新DS承诺（大字符串，界定覆盖范围、重量体积限制、运输温度、配送时间等）
				- 新DS报价
			2. 返回：
				- DS组织者编号 or -1（失败） 
		2. 登记DS：（暂时手工写数据库，稳定后设计接口）
			1. 参数：
				- DS组织者编号
				- 装货点[类型+编号]
				- 卸货点[类型+编号]
				- 是否冷藏
				- 是否冷冻
				- 简述
				- 是否随时承运
					- 星期几
				- 装货时间
				- 卸货时间
				- 最小重量
				- 最少包裹数
				- 最低消费额
				- 构成
					- 种类[Farm，DSS，TP，DP，User]
					- 编号
					- 装货时间
					- 卸货时间 
			2. 返回：
				- DSID or -1（失败）  
		2. 下达工单：
			1. 参数：
				- DS编号
				- 计划起点装货时间
				- 计划终点卸货时间
			2. 返回：
				- DST编号 or -1（失败） 
			3. 同时创建：
				1. 装货工单
					1. 发货方
						- 运输方
							- 种类+编号
							- 姓名
							- 手机 
						- 装货时间
						- 装货清单{包裹编号,...}
					2. 运输方 
						- 发货方 
							- 种类+编号
							- 姓名
							- 手机
						- 装货时间
						- 装货清单{包裹编号,...}
				2. 运输工单：
					- 装货工单{装货时间、包裹数}
					- 卸货工单{卸货时间、包裹数} 
				3. 卸货工单
					1. 收货方
						- 运输方
							- 种类+编号
							- 姓名
							- 手机 
						- 卸货时间
						- 卸货清单{包裹编号,...}
					2. 运输方 
						- 收货方 
							- 种类+编号
							- 姓名
							- 手机
						- 卸货时间
						- 卸货清单{包裹编号,...}

				4. 保管自提工单 
					1. 保管方
						- 自提方
							- 种类+编号
							- 姓名
							- 手机
						- 包裹编号
						- 卸货时间
					2. 自提方
						- 保管方
							- 种类+编号
							- 姓名
							- 手机
						- 包裹编号
						- 卸货时间
 
		3. 查询工单
		4. 查询账务（或者由统一财务模块提供？）
		5. 对账（或者由统一财务模块提供？） 
3. 

###目前的构想  
1. 干线与宅配衔接
	1. 干线负责到农场揽收，运送到物流商的分拣中心或者配送站点。同一区域的合
作农场可以共用干线物流，分担成本。
	2. 宅配负责从分拣中心或者配送站点到消费者家中。
	3. 为了保护各农场客户信息，消费者住址和电话直接分发到宅配配送员手中。菜
箱包装只保留特殊设计的编号，干线途中不会泄密。
	4. 干线承运商一次向多家物流商的配送站点送货，实现宅配网络合并。使消费者
可以自如更换物流商。
2. 干货、叶菜、冷冻食品分化
	1. 干货优先选用报纸发行公司、快递公司的运力，他们还会提供仓储服务，适合
一次大批入仓、分批配送。
	2. 叶菜会呈现报纸发行公司、快递公司、专业食品物流商竞争的形势，各家所投
入的资源和重视程度会随着竞争情况变化，甚至退出。我们会密切监控并及时 协调。
	3. 冷冻食品优先选用专业冷链物流商，他们能提供全程低温的仓储、分拣、宅配
服务。
	4. 我们正与物流商协商这些服务模式：
		1. 不同温度的食品分开装运（需要专门的装备和分拣），到消费者楼下再根据清
单合包递送。
		2. 干货和冷冻食品一次大批入仓，叶菜分批揽收，由承运商根据清单合并宅配。
按照一件计费。
3. 农场合作、消费者合作并行
	1. 物流商与农场合作，农场直接把物流费并入菜价，向消费者提供“包邮”服务。
实际上消费者无法选择物流商。
	2. 物流商与消费者合作，物流商透过我们项目公示服务标准、价格、送达时间、
历史记录等信息，经消费者自愿选择。实质上是消费者雇佣物流商到农场自提，运
输问 题由消费者与物流商交涉。
	3. 项目组重点保证一家高服务质量的物流商（至少覆盖五环内）作为消费者的保
底方案。它的收费会接近农场自有物流的真实成本，但不会超过。
4. 逐步深化
	1. 持续监控：农场客服及时向消费者了解宅配服务质量，及时通报。项目组及时
整理公示、并引导货物分流。
	2. 组织农场与物流商定期协调，促进 种养殖计划、市场推广计划 与 运力建设规
划 同步，消费者分布和配送站点配置 相协调。
	3. 促进农场与物流商人员流动，随岗实习，增进对各自业务特性的熟悉。
	4. 物流模式多元化，贴近农场按季度、半年、一年的销售模式，根据消费者不同
层次需求增加业务品种。
	5. 物流商委托IT合作社开发其内部管理系统，逐步与食品安全项目的软件对接，
实现订单管理、物流管理一体化。

###时间计划
1. 春节后对报纸发行公司、快递工作进行试送，检验试剂服务质量。
2. 3月中旬开始对干线、宅配衔接的进行测试；食品安全项目与物流商内部系统对
接测试。包括软件与线下工作。
3. 4月中旬，消费者自选物流商的软件功能上线。正式支撑夏季菜季销售。